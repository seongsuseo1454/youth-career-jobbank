import { GradeKey } from './data';

// 1. 종합 평가 상세 멘트
export function getEvaluationDetail(grade: string, name: string, jobTitle: string): string {
    switch (grade) {
        case 'S':
            return `놀라운 성과입니다! ${name}님은 ${jobTitle} 직무에 필요한 핵심 지식과 문제 해결 능력을 완벽에 가깝게 갖추고 있습니다. 전문적인 심화 학습을 통해 실제 프로젝트에 도전해볼 것을 강력히 권장합니다.`;
        case 'A':
            return `매우 우수합니다. ${name}님은 ${jobTitle}의 주요 개념을 명확히 이해하고 있으며, 실무에 적용할 수 있는 탄탄한 기초를 다졌습니다. 몇 가지 심화 주제만 보완한다면 전문가 수준으로 성장할 잠재력이 충분합니다.`;
        case 'B':
            return `좋은 성과입니다. ${name}님은 ${jobTitle}에 대한 전반적인 이해도를 갖추고 있습니다. 다만 일부 심화 개념이나 응용 부분에서 조금 더 깊이 있는 학습이 필요합니다. 꾸준한 관심이 성장의 열쇠가 될 것입니다.`;
        case 'C':
            return `가능성이 보입니다. ${name}님은 ${jobTitle}에 흥미를 가지고 시작하는 단계입니다. 기초 용어와 핵심 원리를 차근차근 익혀나간다면, 앞으로 더 큰 성장을 이룰 수 있습니다. 포기하지 말고 재미있는 부분부터 탐구해보세요.`;
        default: // D
            return `시작이 반입니다. ${name}님, ${jobTitle} 분야가 다소 낯설게 느껴질 수 있습니다. 하지만 괜찮습니다. 누구나 처음은 어렵습니다. 흥미로운 입문서나 영상 자료를 통해 가볍게 친해지는 것부터 시작해보세요.`;
    }
}

// 2. 역량별 심층 진단 멘트
export function getCompetencyDetail(categoryKey: string, pct: number): string {
    const level = pct >= 80 ? 'high' : pct >= 60 ? 'mid' : 'low';

    const feedback: Record<string, Record<string, string>> = {
        ethics: {
            high: '데이터 윤리 의식이 매우 투철합니다. 책임감 있는 전문가로서의 자질이 돋보입니다.',
            mid: '윤리적인 판단 기준을 잘 이해하고 있습니다. 복잡한 상황에서의 적용 연습이 필요합니다.',
            low: '데이터 윤리에 대한 이해가 필요합니다. 개인정보 보호와 연구 윤리의 중요성을 먼저 학습해보세요.'
        },
        eda: {
            high: '데이터를 꿰뚫어보는 통찰력이 뛰어납니다. 시각화와 패턴 발견에 탁월한 재능이 있습니다.',
            mid: '데이터의 흐름을 잘 파악하고 있습니다. 다양한 시각화 기법을 익히면 분석력이 배가될 것입니다.',
            low: '데이터 탐색의 기초를 다져야 합니다. 평균, 분포 등 기본 통계 개념부터 친해져 보세요.'
        },
        model: {
            high: '모델링의 원리를 깊이 이해하고 있습니다. 최적의 알고리즘을 선택하고 설계하는 능력이 우수합니다.',
            mid: '모델링의 기본 과정을 잘 수행합니다. 다양한 모델의 장단점을 비교해보며 시야를 넓혀보세요.',
            low: '모델링 개념이 다소 어렵게 느껴질 수 있습니다. "입력과 출력"의 관계를 이해하는 것부터 시작해보세요.'
        },
        perf: {
            high: '결과를 객관적으로 검증하는 능력이 탁월합니다. 지표의 의미를 정확히 해석할 줄 압니다.',
            mid: '성능 평가의 중요성을 알고 있습니다. 정확도 외에 정밀도, 재현율 등 다양한 지표를 학습해보세요.',
            low: '결과 해석에 어려움이 있을 수 있습니다. "얼마나 잘 맞췄나?"를 숫자로 표현하는 방법을 익혀보세요.'
        },
        sim: { // 실무 응용
            high: '배운 지식을 실제 문제 해결에 적용하는 응용력이 뛰어납니다. 현장 투입이 가능한 수준입니다.',
            mid: '이론을 실무에 연결하려는 시도가 좋습니다. 작은 프로젝트를 통해 경험을 쌓아보세요.',
            low: '실제 적용 경험이 필요합니다. 일상 생활의 문제를 데이터 관점에서 바라보는 연습을 해보세요.'
        }
    };

    // 카테고리 키가 없는 경우 기본값 처리
    const cat = feedback[categoryKey] || {
        high: '해당 역량이 매우 우수합니다.',
        mid: '해당 역량이 양호한 수준입니다.',
        low: '해당 역량에 대한 보완이 필요합니다.'
    };

    return cat[level];
}

// 3. 진로 로드맵 & 구체 행동 (학년별/수준별)
export function getRoadmapDetail(grade: string, field: string, userGrade: GradeKey): string[] {
    // 간단한 로직: 등급(S/A/B...)과 학년(elem/middle/high)에 따라 추천 활동 반환
    // 여기서는 예시로 학년 위주로 제안하되, 성취도가 높으면 심화 활동 추천

    const isHighPerformer = ['S', 'A'].includes(grade);

    if (userGrade === 'elem') {
        if (isHighPerformer) {
            return [
                '스크래치/엔트리로 나만의 인공지능 게임 만들어보기',
                '주변의 데이터를 모아 그래프로 그려보고 발표하기',
                '관련 분야 어린이 과학 잡지 구독하기'
            ];
        } else {
            return [
                '재미있는 과학 만화책으로 용어와 친해지기',
                '박물관이나 과학관의 진로 체험 프로그램 참여하기',
                '블록 코딩으로 간단한 캐릭터 움직여보기'
            ];
        }
    } else if (userGrade === 'middle') {
        if (isHighPerformer) {
            return [
                '파이썬 기초 문법 익히고 간단한 계산기 만들기',
                'Kaggle 등 데이터 분석 경진대회 구경하고 필사해보기',
                '관심 분야의 전문가 인터뷰 영상 찾아보기'
            ];
        } else {
            return [
                '학교 동아리 활동을 통해 친구들과 같이 공부하기',
                '유튜브에서 기초 강의를 들으며 흥미 찾기',
                '관련 분야 영화나 다큐멘터리 감상하기'
            ];
        }
    } else { // high
        if (isHighPerformer) {
            return [
                '실제 데이터를 활용한 미니 프로젝트 진행 및 깃허브 업로드',
                '관련 학과 진학을 위한 심화 독서 및 탐구 보고서 작성',
                '오픈소스 프로젝트 기여 방법 알아보기'
            ];
        } else {
            return [
                '관심 대학의 커리큘럼을 찾아보고 필요한 선수 지식 파악하기',
                '온라인 부트캠프나 무료 강의로 기초 실력 다지기',
                '진로 선생님과 구체적인 진학/취업 상담하기'
            ];
        }
    }
}
